<html>
    <head>
        <title>Quick UI</title>
        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    </head>

    <body>
        <div class="container">
            <div class="row">
                <form class="col s12">
                    <div class="row">
                        {% for i in form_fields %}
                            <div class="input-field col s3">
                                <a class="waves-effect waves-light btn"><i class="material-icons left">cloud</i>{{ i["parameter"] }}</a>
                            </div>
                            <div class="input-field col s9">
                                <input id="input_{{ loop.index - 1}}">
                            </div>
                        {% endfor %}
                    </div>
                </form>>
            </div>
        </div>
    </body>

    <script>

        function add_placeholder(element, id) {
            if (!("help" in element))
                return;
            $(id).attr("placeholder", element["help"]);
        }

        function add_required_check(element, id) {
            if (!("required" in element))
                return;

            if (!(element["required"] == "True"))
                return;

            $(id).prop("required", true);
        }

        function add_data_type(element, id) {
            if (!("type" in element))
                return;

            if (element["type"] == "str")
                $(id).attr("type", "text");

            if (element["type"] == "int") {
                $(id).attr("type", "number");
                $(id).attr("step", "1");
            }

            if (element["type"] == "float") {
                $(id).attr("type", "number");
            }

            if (element["type"] == "bool") {
                $(id).html(`
                    <label>
                        <input type="checkbox" />
                        <span>Select this field</span>
                     </label>
                `);
            }
            console.log(element["type"]);
        }

        function fill_input_boxes() {
            fields = {{ form_fields|safe }};

            for (var i in fields) {
                var element = fields[i];
                var id = "#input_" + i.toString();

                // 1. Set the placeholder value if help exists.
                add_placeholder(element, id);

                // 2. Add the required attribute. Jinja sends booleans as a string
                add_required_check(element, id);

                // 3. Add a data type
                add_data_type(element, id);
            }
        }
        fill_input_boxes();
    </script>
</html>